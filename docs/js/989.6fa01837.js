"use strict";(self["webpackChunkcovid_colors"]=self["webpackChunkcovid_colors"]||[]).push([[989],{989:(e,t,l)=>{l.r(t),l.d(t,{default:()=>S});var a=l(9835),i=l(6970),n=l(499);const o=(0,a.Uk)("Active"),u=(0,a.Uk)("Remove"),r=(0,a.Uk)(" No results "),d=(0,a.Uk)(" Add ");var c;(function(e){e[e["POSITIVITY"]=0]="POSITIVITY",e[e["DAILY_RATE"]=1]="DAILY_RATE"})(c||(c={}));const s=(0,a.aZ)({props:{data:null,cityList:null,dateList:null},setup(e){const t=e,l=new Intl.NumberFormat("en-US",{maximumSignificantDigits:3,style:"percent"}),s=new Intl.NumberFormat("en-US",{maximumSignificantDigits:3}),m=(0,n.iH)(p()),f=(0,n.iH)("");function p(){return Array.from(t.cityList.values()).sort()}function w(){return Array.from(t.dateList.values()).sort().reverse()}function v(e,t){t((()=>{const t=e.toLowerCase();m.value=p().filter((e=>e.toLowerCase().indexOf(t)>-1))}))}const y=(0,n.iH)("");(0,a.YP)(t.dateList,(()=>{y.value=w()[0]}));const g=(0,n.qj)([]);function I(e){e&&t.cityList.has(e)?void 0===g.find((t=>t.city===e))?g.push({city:e,weight:50,active:!0}):console.log(`Cravenly refusing to add another ${e}.`):console.log(`Invalid city: ${e}.`)}function U(e){let t=-1;while((t=g.findIndex((t=>t.city===e.city)))>-1)g.splice(t,1)}function _(){return g.filter((e=>e.active)).map((e=>e.weight)).reduce(((e,t)=>e+t),0)}function k(e,l,a){const i=t.data.find((t=>t.city===e&&t.report_date===l));if(!i)throw`Unable to find record for ${e} and report date ${l}`;switch(a){case c.DAILY_RATE:return i.daily_rate;case c.POSITIVITY:return i.pct_positivity}}function h(){return g.map(S).reduce(((e,t)=>e+t),0)}function S(e){return e.active?k(e.city,y.value,c.POSITIVITY)*e.weight/_():0}function V(e){return e.active?k(e.city,y.value,c.DAILY_RATE)*e.weight/_():0}function T(){return g.map(V).reduce(((e,t)=>e+t),0)}return(t,p)=>{const _=(0,a.up)("q-spinner-hearts"),A=(0,a.up)("q-item"),L=(0,a.up)("q-slider"),b=(0,a.up)("q-toggle"),q=(0,a.up)("q-btn"),W=(0,a.up)("q-item-section"),Y=(0,a.up)("q-select"),C=(0,a.up)("q-list"),Z=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(Z,{class:"row items-center justify-evenly"},{default:(0,a.w5)((()=>[e.data&&0!==e.data.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(_,{key:0,size:"40%",color:"pink"})),e.data&&e.data.length>0?((0,a.wg)(),(0,a.j4)(C,{key:1},{default:(0,a.w5)((()=>[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" Net positivity: "+(0,i.zw)((0,n.SU)(l).format(h())),1)])),_:1}),(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" Net daily rate: "+(0,i.zw)((0,n.SU)(s).format(T())),1)])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,n.SU)(g),(e=>((0,a.wg)(),(0,a.j4)(A,{key:e.city},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.city)+" "+(0,i.zw)((0,n.SU)(l).format(k(e.city,y.value,c.POSITIVITY)))+" "+(0,i.zw)((0,n.SU)(s).format(k(e.city,y.value,c.DAILY_RATE)))+" ",1),(0,a.Wm)(L,{modelValue:e.weight,"onUpdate:modelValue":t=>e.weight=t,min:0,max:100,label:"","label-always":""},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Uk)(" Contribution: "+(0,i.zw)((0,n.SU)(l).format(S(e)))+" "+(0,i.zw)((0,n.SU)(s).format(V(e)))+" ",1),(0,a.Wm)(b,{modelValue:e.active,"onUpdate:modelValue":t=>e.active=t},{default:(0,a.w5)((()=>[o])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(q,{onClick:t=>U(e)},{default:(0,a.w5)((()=>[u])),_:2},1032,["onClick"])])),_:2},1024)))),128)),(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Y,{rounded:"",outlined:"",modelValue:f.value,"onUpdate:modelValue":p[0]||(p[0]=e=>f.value=e),label:"Add City","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:m.value,onFilter:v},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Wm)(W,{class:"text-grey"},{default:(0,a.w5)((()=>[r])),_:1})])),_:1})])),_:1},8,["modelValue","options"]),(0,a.Wm)(q,{onClick:p[1]||(p[1]=()=>I(f.value)),disable:!(f.value&&e.cityList.has(f.value))},{default:(0,a.w5)((()=>[d])),_:1},8,["disable"])])),_:1}),(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Y,{rounded:"",outlined:"",modelValue:y.value,"onUpdate:modelValue":p[2]||(p[2]=e=>y.value=e),label:"Report Date",options:w()},null,8,["modelValue","options"])])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1})}}});var m=l(9885),f=l(4090),p=l(3246),w=l(490),v=l(8423),y=l(592),g=l(9379),I=l(8515),U=l(1233),_=l(9984),k=l.n(_);const h=s,S=h;k()(s,"components",{QPage:m.Z,QSpinnerHearts:f.Z,QList:p.Z,QItem:w.Z,QSlider:v.Z,QToggle:y.Z,QBtn:g.Z,QSelect:I.Z,QItemSection:U.Z})}}]);